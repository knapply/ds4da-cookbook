% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{book}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={ds4da Cookbook},
  pdfauthor={Brendan Knapp and Christopher Callaghan},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{longtable,booktabs}
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
\usepackage{booktabs}
%
% \lstset{
%   breaklines=true
% }

% \renewcommand{\linethickness}{0.05em}
\usepackage[]{natbib}
\bibliographystyle{apalike}

\title{ds4da Cookbook}
\usepackage{etoolbox}
\makeatletter
\providecommand{\subtitle}[1]{% add subtitle to \maketitle
  \apptocmd{\@title}{\par {\large #1 \par}}{}{}
}
\makeatother
\subtitle{Recipes for Success}
\author{Brendan Knapp and Christopher Callaghan}
\date{2020-09-25}

\begin{document}
\maketitle

{
\setcounter{tocdepth}{1}
\tableofcontents
}
\hypertarget{welcome}{%
\chapter*{Welcome}\label{welcome}}
\addcontentsline{toc}{chapter}{Welcome}

Test

\texttt{\textless{}-\ ==\ !=}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{test <-}\StringTok{ "face"}
\end{Highlighting}
\end{Shaded}

\hypertarget{preface}{%
\chapter*{Preface}\label{preface}}
\addcontentsline{toc}{chapter}{Preface}

init

\cleardoublepage

\hypertarget{part-setup}{%
\part{Setup}\label{part-setup}}

\hypertarget{setup-r-and-rstudio}{%
\chapter{R and RStudio}\label{setup-r-and-rstudio}}

\hypertarget{r}{%
\section{R}\label{r}}

\hypertarget{installation}{%
\subsection{Installation}\label{installation}}

\url{https://cran.r-project.org/}

\hypertarget{rstudio}{%
\section{RStudio}\label{rstudio}}

\hypertarget{installation-1}{%
\subsection{Installation}\label{installation-1}}

\url{https://rstudio.com/products/rstudio/download/}

\cleardoublepage

\hypertarget{part-reading-and-writing-data}{%
\part{Reading and Writing Data}\label{part-reading-and-writing-data}}

\hypertarget{tabular-data}{%
\chapter{Tabular Data}\label{tabular-data}}

\begin{itemize}
\tightlist
\item
  Aliases:

  \begin{itemize}
  \tightlist
  \item
    Tabular files
  \item
    Flat
  \item
    Delimited
  \end{itemize}
\item
  Includes:

  \begin{itemize}
  \tightlist
  \item
    Comma-Separated Value (.csv)
  \item
    Tab-Separated Value (.tsv)
  \end{itemize}
\end{itemize}

\hypertarget{basics}{%
\section{Basics}\label{basics}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(readr)}
\end{Highlighting}
\end{Shaded}

Here's some example data, modified from \url{http://www.gapminder.org/data/}

\begin{verbatim}
country,continent,year,lifeExp,pop,gdpPercap       # header/column names, separated by commas
Afghanistan,Asia,1952,28.801,8425333,779.4453145
Afghanistan,Asia,1957,30.332,9240934,820.8530296   # comma-separated values
Afghanistan,Asia,1962,31.997,10267083,853.10071
Afghanistan,Asia,1967,34.02,11537966,836.1971382
Afghanistan,Asia,1972,36.088,13079460,739.9811058
Afghanistan,Asia,1977,38.438,14880372,786.11336
Afghanistan,Asia,1982,39.854,12881816,978.0114388
Afghanistan,Asia,1987,40.822,13867957,852.3959448
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{csv_text <-}\StringTok{ }
\StringTok{'country,continent,year,lifeExp,pop,gdpPercap     }
\StringTok{Afghanistan,Asia,1952,28.801,8425333,779.4453145}
\StringTok{Afghanistan,Asia,1957,30.332,9240934,820.8530296}
\StringTok{Afghanistan,Asia,1962,31.997,10267083,853.10071}
\StringTok{Afghanistan,Asia,1967,34.02,11537966,836.1971382}
\StringTok{Afghanistan,Asia,1972,36.088,13079460,739.9811058}
\StringTok{Afghanistan,Asia,1977,38.438,14880372,786.11336}
\StringTok{Afghanistan,Asia,1982,39.854,12881816,978.0114388}
\StringTok{Afghanistan,Asia,1987,40.822,13867957,852.3959448'}

\NormalTok{csv_file <-}\StringTok{ }\KeywordTok{tempfile}\NormalTok{(}\DataTypeTok{fileext =} \StringTok{".csv"}\NormalTok{)      }
\NormalTok{csv_file }\CommentTok{# a temporary file path}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "/tmp/Rtmp7xGAB2/file7e231025167f.csv"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{writeLines}\NormalTok{(}\DataTypeTok{text =}\NormalTok{ csv_text, }\DataTypeTok{con =}\NormalTok{ csv_file) }\CommentTok{# write `csv_text` to `csv_file`}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{read_csv}\NormalTok{(}\DataTypeTok{file =}\NormalTok{ csv_file)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Parsed with column specification:
## cols(
##   country = col_character(),
##   continent = col_character(),
##   year = col_double(),
##   lifeExp = col_double(),
##   pop = col_double(),
##   gdpPercap = col_double()
## )
\end{verbatim}

\begin{verbatim}
## # A tibble: 8 x 6
##   country     continent  year lifeExp      pop gdpPercap
##   <chr>       <chr>     <dbl>   <dbl>    <dbl>     <dbl>
## 1 Afghanistan Asia       1952    28.8  8425333      779.
## 2 Afghanistan Asia       1957    30.3  9240934      821.
## 3 Afghanistan Asia       1962    32.0 10267083      853.
## 4 Afghanistan Asia       1967    34.0 11537966      836.
## 5 Afghanistan Asia       1972    36.1 13079460      740.
## 6 Afghanistan Asia       1977    38.4 14880372      786.
## 7 Afghanistan Asia       1982    39.9 12881816      978.
## 8 Afghanistan Asia       1987    40.8 13867957      852.
\end{verbatim}

You may encounter Tab-Delimited data where values are separated by \texttt{\textbackslash{}t} instead of \texttt{,}. Instead of \texttt{readr::read\_csv()}, we can use \texttt{readr::read\_tsv()}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{tsv_text <-}\StringTok{ }
\StringTok{'country}\CharTok{\textbackslash{}t}\StringTok{continent}\CharTok{\textbackslash{}t}\StringTok{year}\CharTok{\textbackslash{}t}\StringTok{lifeExp}\CharTok{\textbackslash{}t}\StringTok{pop}\CharTok{\textbackslash{}t}\StringTok{gdpPercap     }
\StringTok{Afghanistan}\CharTok{\textbackslash{}t}\StringTok{Asia}\CharTok{\textbackslash{}t}\StringTok{1952}\CharTok{\textbackslash{}t}\StringTok{28.801}\CharTok{\textbackslash{}t}\StringTok{8425333}\CharTok{\textbackslash{}t}\StringTok{779.4453145}
\StringTok{Afghanistan}\CharTok{\textbackslash{}t}\StringTok{Asia}\CharTok{\textbackslash{}t}\StringTok{1957}\CharTok{\textbackslash{}t}\StringTok{30.332}\CharTok{\textbackslash{}t}\StringTok{9240934}\CharTok{\textbackslash{}t}\StringTok{820.8530296}
\StringTok{Afghanistan}\CharTok{\textbackslash{}t}\StringTok{Asia}\CharTok{\textbackslash{}t}\StringTok{1962}\CharTok{\textbackslash{}t}\StringTok{31.997}\CharTok{\textbackslash{}t}\StringTok{10267083}\CharTok{\textbackslash{}t}\StringTok{853.10071}
\StringTok{Afghanistan}\CharTok{\textbackslash{}t}\StringTok{Asia}\CharTok{\textbackslash{}t}\StringTok{1967}\CharTok{\textbackslash{}t}\StringTok{34.02}\CharTok{\textbackslash{}t}\StringTok{11537966}\CharTok{\textbackslash{}t}\StringTok{836.1971382}
\StringTok{Afghanistan}\CharTok{\textbackslash{}t}\StringTok{Asia}\CharTok{\textbackslash{}t}\StringTok{1972}\CharTok{\textbackslash{}t}\StringTok{36.088}\CharTok{\textbackslash{}t}\StringTok{13079460}\CharTok{\textbackslash{}t}\StringTok{739.9811058}
\StringTok{Afghanistan}\CharTok{\textbackslash{}t}\StringTok{Asia}\CharTok{\textbackslash{}t}\StringTok{1977}\CharTok{\textbackslash{}t}\StringTok{38.438}\CharTok{\textbackslash{}t}\StringTok{14880372}\CharTok{\textbackslash{}t}\StringTok{786.11336}
\StringTok{Afghanistan}\CharTok{\textbackslash{}t}\StringTok{Asia}\CharTok{\textbackslash{}t}\StringTok{1982}\CharTok{\textbackslash{}t}\StringTok{39.854}\CharTok{\textbackslash{}t}\StringTok{12881816}\CharTok{\textbackslash{}t}\StringTok{978.0114388}
\StringTok{Afghanistan}\CharTok{\textbackslash{}t}\StringTok{Asia}\CharTok{\textbackslash{}t}\StringTok{1987}\CharTok{\textbackslash{}t}\StringTok{40.822}\CharTok{\textbackslash{}t}\StringTok{13867957}\CharTok{\textbackslash{}t}\StringTok{852.3959448'}

\NormalTok{tsv_file <-}\StringTok{ }\KeywordTok{tempfile}\NormalTok{(}\DataTypeTok{fileext =} \StringTok{".tsv"}\NormalTok{)}
\KeywordTok{writeLines}\NormalTok{(}\DataTypeTok{text =}\NormalTok{ tsv_text, }\DataTypeTok{con =}\NormalTok{ tsv_file)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{read_tsv}\NormalTok{(}\DataTypeTok{file =}\NormalTok{ tsv_file)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Parsed with column specification:
## cols(
##   country = col_character(),
##   continent = col_character(),
##   year = col_double(),
##   lifeExp = col_double(),
##   pop = col_double(),
##   gdpPercap = col_double()
## )
\end{verbatim}

\begin{verbatim}
## # A tibble: 8 x 6
##   country     continent  year lifeExp      pop gdpPercap
##   <chr>       <chr>     <dbl>   <dbl>    <dbl>     <dbl>
## 1 Afghanistan Asia       1952    28.8  8425333      779.
## 2 Afghanistan Asia       1957    30.3  9240934      821.
## 3 Afghanistan Asia       1962    32.0 10267083      853.
## 4 Afghanistan Asia       1967    34.0 11537966      836.
## 5 Afghanistan Asia       1972    36.1 13079460      740.
## 6 Afghanistan Asia       1977    38.4 14880372      786.
## 7 Afghanistan Asia       1982    39.9 12881816      978.
## 8 Afghanistan Asia       1987    40.8 13867957      852.
\end{verbatim}

If we find ourselves reading delmited data that uses something other than \texttt{\textbackslash{}t} or \texttt{,} to separate values, we can use \texttt{readr::read\_delim()}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{pipe_separated_values_text <-}\StringTok{ }
\StringTok{'country|continent|year|lifeExp|pop|gdpPercap     }
\StringTok{Afghanistan|Asia|1952|28.801|8425333|779.4453145}
\StringTok{Afghanistan|Asia|1957|30.332|9240934|820.8530296}
\StringTok{Afghanistan|Asia|1962|31.997|10267083|853.10071}
\StringTok{Afghanistan|Asia|1967|34.02|11537966|836.1971382}
\StringTok{Afghanistan|Asia|1972|36.088|13079460|739.9811058}
\StringTok{Afghanistan|Asia|1977|38.438|14880372|786.11336}
\StringTok{Afghanistan|Asia|1982|39.854|12881816|978.0114388}
\StringTok{Afghanistan|Asia|1987|40.822|13867957|852.3959448'}

\NormalTok{psv_file <-}\StringTok{ }\KeywordTok{tempfile}\NormalTok{(}\DataTypeTok{fileext =} \StringTok{".tsv"}\NormalTok{)}
\KeywordTok{writeLines}\NormalTok{(}\DataTypeTok{text =}\NormalTok{ pipe_separated_values_text, }\DataTypeTok{con =}\NormalTok{ psv_file)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{read_delim}\NormalTok{(}\DataTypeTok{file =}\NormalTok{ psv_file, }\DataTypeTok{delim =} \StringTok{"|"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Parsed with column specification:
## cols(
##   country = col_character(),
##   continent = col_character(),
##   year = col_double(),
##   lifeExp = col_double(),
##   pop = col_double(),
##   `gdpPercap     ` = col_double()
## )
\end{verbatim}

\begin{verbatim}
## # A tibble: 8 x 6
##   country     continent  year lifeExp      pop `gdpPercap     `
##   <chr>       <chr>     <dbl>   <dbl>    <dbl>            <dbl>
## 1 Afghanistan Asia       1952    28.8  8425333             779.
## 2 Afghanistan Asia       1957    30.3  9240934             821.
## 3 Afghanistan Asia       1962    32.0 10267083             853.
## 4 Afghanistan Asia       1967    34.0 11537966             836.
## 5 Afghanistan Asia       1972    36.1 13079460             740.
## 6 Afghanistan Asia       1977    38.4 14880372             786.
## 7 Afghanistan Asia       1982    39.9 12881816             978.
## 8 Afghanistan Asia       1987    40.8 13867957             852.
\end{verbatim}

\begin{verbatim}
country,continent,year,lifeExp,pop,gdpPercap       # header/column names
Afghanistan,Asia,1952,28.801,8425333,779.4453145
Afghanistan,Asia,1957,30.332,9240934,820.8530296
Afghanistan,Asia,1962,31.997,10267083,853.10071
Afghanistan,Asia,1967,34.02,11537966,836.1971382
Afghanistan,Asia,1972,36.088,13079460,739.9811058
Afghanistan,Asia,1977,38.438,14880372,786.11336
Afghanistan,Asia,1982,39.854,12881816,978.0114388
Afghanistan,Asia,1987,40.822,13867957,852.3959448
Afghanistan,,,N/A,,                                # notice that we're missing values
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{csv_text <-}\StringTok{ }
\StringTok{'country,continent,year,lifeExp,pop,gdpPercap}
\StringTok{Afghanistan,Asia,1952,28.801,8425333,779.4453145}
\StringTok{Afghanistan,Asia,1957,30.332,9240934,820.8530296}
\StringTok{Afghanistan,Asia,1962,31.997,10267083,853.10071}
\StringTok{Afghanistan,Asia,1967,34.02,11537966,836.1971382}
\StringTok{Afghanistan,Asia,1972,36.088,13079460,739.9811058}
\StringTok{Afghanistan,Asia,1977,38.438,14880372,786.11336}
\StringTok{Afghanistan,Asia,1982,39.854,12881816,978.0114388}
\StringTok{Afghanistan,Asia,1987,40.822,13867957,852.3959448}
\StringTok{Afghanistan,,,N/A,,'}

\NormalTok{csv_file <-}\StringTok{ }\KeywordTok{tempfile}\NormalTok{(}\DataTypeTok{fileext =} \StringTok{".csv"}\NormalTok{)}
\KeywordTok{writeLines}\NormalTok{(}\DataTypeTok{text =}\NormalTok{ csv_text, }\DataTypeTok{con =}\NormalTok{ csv_file)}
\end{Highlighting}
\end{Shaded}

\hypertarget{common-pitfalls}{%
\section{Common Pitfalls}\label{common-pitfalls}}

\hypertarget{incorrect-column-types}{%
\subsection{Incorrect Column Types}\label{incorrect-column-types}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data_frame_from_csv <-}\StringTok{ }\KeywordTok{read_csv}\NormalTok{(}\DataTypeTok{file =}\NormalTok{ csv_file)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Parsed with column specification:
## cols(
##   country = col_character(),
##   continent = col_character(),
##   year = col_double(),
##   lifeExp = col_character(),
##   pop = col_double(),
##   gdpPercap = col_double()
## )
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data_frame_from_csv}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 9 x 6
##   country     continent  year lifeExp      pop gdpPercap
##   <chr>       <chr>     <dbl> <chr>      <dbl>     <dbl>
## 1 Afghanistan Asia       1952 28.801   8425333      779.
## 2 Afghanistan Asia       1957 30.332   9240934      821.
## 3 Afghanistan Asia       1962 31.997  10267083      853.
## 4 Afghanistan Asia       1967 34.02   11537966      836.
## 5 Afghanistan Asia       1972 36.088  13079460      740.
## 6 Afghanistan Asia       1977 38.438  14880372      786.
## 7 Afghanistan Asia       1982 39.854  12881816      978.
## 8 Afghanistan Asia       1987 40.822  13867957      852.
## 9 Afghanistan <NA>         NA N/A           NA       NA
\end{verbatim}

Notice that our \texttt{year} column says \texttt{\textless{}dbl\textgreater{}}, referring to it being of type \texttt{double}, yet all of our \texttt{year} values are whole numbers.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{typeof}\NormalTok{(data_frame_from_csv}\OperatorTok{$}\NormalTok{year)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "double"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data_frame_from_csv}\OperatorTok{$}\NormalTok{year}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 1952 1957 1962 1967 1972 1977 1982 1987   NA
\end{verbatim}

We also have \texttt{"N/A"} in our \texttt{lifeExp} column, forcing R to interpret all \texttt{lifeExp} values as \texttt{character}s (\texttt{\textless{}chr\textgreater{}}).

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{typeof}\NormalTok{(data_frame_from_csv}\OperatorTok{$}\NormalTok{lifeExp)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "character"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data_frame_from_csv}\OperatorTok{$}\NormalTok{lifeExp}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "28.801" "30.332" "31.997" "34.02"  "36.088" "38.438" "39.854" "40.822" "N/A"
\end{verbatim}

\hypertarget{solution}{%
\subsubsection{Solution}\label{solution}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{read_csv}\NormalTok{(}
  \DataTypeTok{file =}\NormalTok{ csv_file,}
  \DataTypeTok{col_types =} \KeywordTok{cols}\NormalTok{(}
    \DataTypeTok{country =} \KeywordTok{col_character}\NormalTok{(),}
    \DataTypeTok{continent =} \KeywordTok{col_character}\NormalTok{(),}
    \DataTypeTok{year =} \KeywordTok{col_integer}\NormalTok{(),        }\CommentTok{# read `year` as `integer`}
    \DataTypeTok{lifeExp =} \KeywordTok{col_double}\NormalTok{(),      }\CommentTok{# read `lifeExp` as `double`}
    \DataTypeTok{pop =} \KeywordTok{col_double}\NormalTok{(),}
    \DataTypeTok{gdpPercap =} \KeywordTok{col_double}\NormalTok{()}
\NormalTok{  ),}
  \DataTypeTok{na =} \KeywordTok{c}\NormalTok{(}\StringTok{""}\NormalTok{, }\StringTok{"N/A"}\NormalTok{)              }\CommentTok{# be explicit about how `csv_file` represents missing values}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 9 x 6
##   country     continent  year lifeExp      pop gdpPercap
##   <chr>       <chr>     <int>   <dbl>    <dbl>     <dbl>
## 1 Afghanistan Asia       1952    28.8  8425333      779.
## 2 Afghanistan Asia       1957    30.3  9240934      821.
## 3 Afghanistan Asia       1962    32.0 10267083      853.
## 4 Afghanistan Asia       1967    34.0 11537966      836.
## 5 Afghanistan Asia       1972    36.1 13079460      740.
## 6 Afghanistan Asia       1977    38.4 14880372      786.
## 7 Afghanistan Asia       1982    39.9 12881816      978.
## 8 Afghanistan Asia       1987    40.8 13867957      852.
## 9 Afghanistan <NA>         NA    NA         NA       NA
\end{verbatim}

\cleardoublepage

\hypertarget{part-data-frames}{%
\part{Data Frames}\label{part-data-frames}}

\hypertarget{manipulating-data-frames}{%
\chapter{Manipulating Data Frames}\label{manipulating-data-frames}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(tidyverse, }\DataTypeTok{warn.conflicts =} \OtherTok{FALSE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## -- Attaching packages --------------------------------------------------------------------- tidyverse 1.3.0 --
\end{verbatim}

\begin{verbatim}
## v ggplot2 3.3.2     v purrr   0.3.4
## v tibble  3.0.3     v dplyr   1.0.2
## v tidyr   1.1.2     v stringr 1.4.0
## v readr   1.3.1     v forcats 0.5.0
\end{verbatim}

\begin{verbatim}
## -- Conflicts ------------------------------------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df <-}\StringTok{ }\KeywordTok{tibble}\NormalTok{(}
  \DataTypeTok{group =} \KeywordTok{c}\NormalTok{(}\StringTok{"a"}\NormalTok{, }\StringTok{"a"}\NormalTok{, }\StringTok{"b"}\NormalTok{, }\StringTok{"b"}\NormalTok{, }\StringTok{"b"}\NormalTok{),}
  \DataTypeTok{a =} \KeywordTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{4}\NormalTok{, }\OtherTok{NA}\NormalTok{, }\DecValTok{3}\NormalTok{, }\DecValTok{5}\NormalTok{),}
  \DataTypeTok{b =} \KeywordTok{c}\NormalTok{(}\DecValTok{9}\NormalTok{, }\OtherTok{NA}\NormalTok{, }\DecValTok{8}\NormalTok{, }\DecValTok{10}\NormalTok{, }\DecValTok{7}\NormalTok{),}
  \DataTypeTok{c =} \KeywordTok{c}\NormalTok{(}\OtherTok{TRUE}\NormalTok{, }\OtherTok{FALSE}\NormalTok{, }\OtherTok{NA}\NormalTok{, }\OtherTok{FALSE}\NormalTok{, }\OtherTok{TRUE}\NormalTok{),}
  \DataTypeTok{d =} \KeywordTok{c}\NormalTok{(LETTERS[}\DecValTok{1}\OperatorTok{:}\DecValTok{3}\NormalTok{], }\OtherTok{NA}\NormalTok{, LETTERS[[}\DecValTok{5}\NormalTok{]]),}
  \DataTypeTok{e =} \KeywordTok{factor}\NormalTok{(}\DecValTok{1}\OperatorTok{:}\DecValTok{5}\NormalTok{, }\DataTypeTok{labels =} \KeywordTok{c}\NormalTok{(}\StringTok{"tiny"}\NormalTok{, }\StringTok{"small"}\NormalTok{, }\StringTok{"medium"}\NormalTok{, }\StringTok{"big"}\NormalTok{, }\StringTok{"huge"}\NormalTok{)),}
  \DataTypeTok{f_col =} \KeywordTok{c}\NormalTok{(}\KeywordTok{as.Date}\NormalTok{(}\OtherTok{NA}\NormalTok{), }\KeywordTok{as.Date}\NormalTok{(}\StringTok{"2020-09-23"}\NormalTok{) }\OperatorTok{+}\StringTok{ }\KeywordTok{c}\NormalTok{(}\DecValTok{3}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{1}\NormalTok{, }\DecValTok{4}\NormalTok{)),}
  \DataTypeTok{g_col =} \KeywordTok{c}\NormalTok{(}\KeywordTok{as.POSIXct}\NormalTok{(}\StringTok{"2020-09-23 00:00:00"}\NormalTok{) }\OperatorTok{+}\StringTok{ }\DecValTok{1}\OperatorTok{:}\DecValTok{4} \OperatorTok{*}\StringTok{ }\DecValTok{60} \OperatorTok{*}\StringTok{ }\DecValTok{60} \OperatorTok{*}\StringTok{ }\DecValTok{24} \OperatorTok{*}\StringTok{ }\FloatTok{1.1}\NormalTok{, }\OtherTok{NA}\NormalTok{),}
  \DataTypeTok{col_h =} \KeywordTok{list}\NormalTok{(}\KeywordTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{10}\NormalTok{), }\KeywordTok{c}\NormalTok{(}\DecValTok{2}\NormalTok{, }\OtherTok{NA}\NormalTok{), }\KeywordTok{c}\NormalTok{(}\DecValTok{3}\NormalTok{, }\DecValTok{8}\NormalTok{), }\KeywordTok{c}\NormalTok{(}\DecValTok{4}\NormalTok{, }\DecValTok{7}\NormalTok{), }\KeywordTok{c}\NormalTok{(}\DecValTok{5}\NormalTok{, }\DecValTok{6}\NormalTok{)),}
  \DataTypeTok{col_i =} \KeywordTok{list}\NormalTok{(}\OtherTok{NULL}\NormalTok{, pi, month.abb[}\DecValTok{6}\OperatorTok{:}\DecValTok{10}\NormalTok{], iris, }\KeywordTok{as.matrix}\NormalTok{(mtcars))}
\NormalTok{)}

\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 10
##   group     a     b c     d     e      f_col      g_col               col_h     col_i               
##   <chr> <dbl> <dbl> <lgl> <chr> <fct>  <date>     <dttm>              <list>    <list>              
## 1 a         1     9 TRUE  A     tiny   NA         2020-09-24 02:24:00 <dbl [2]> <NULL>              
## 2 a         4    NA FALSE B     small  2020-09-26 2020-09-25 04:48:00 <dbl [2]> <dbl [1]>           
## 3 b        NA     8 NA    C     medium 2020-09-25 2020-09-26 07:12:00 <dbl [2]> <chr [5]>           
## 4 b         3    10 FALSE <NA>  big    2020-09-24 2020-09-27 09:36:00 <dbl [2]> <df[,5] [150 x 5]>  
## 5 b         5     7 TRUE  E     huge   2020-09-27 NA                  <dbl [2]> <dbl[,11] [32 x 11]>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{glimpse}\NormalTok{(df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 5
## Columns: 10
## $ group <chr> "a", "a", "b", "b", "b"
## $ a     <dbl> 1, 4, NA, 3, 5
## $ b     <dbl> 9, NA, 8, 10, 7
## $ c     <lgl> TRUE, FALSE, NA, FALSE, TRUE
## $ d     <chr> "A", "B", "C", NA, "E"
## $ e     <fct> tiny, small, medium, big, huge
## $ f_col <date> NA, 2020-09-26, 2020-09-25, 2020-09-24, 2020-09-27
## $ g_col <dttm> 2020-09-24 02:24:00, 2020-09-25 04:48:00, 2020-09-26 07:12:00, 2020-09-27 09:36:00, NA
## $ col_h <list> [<1, 10>, <2, NA>, <3, 8>, <4, 7>, <5, 6>]
## $ col_i <list> [NULL, 3.141593, <"Jun", "Jul", "Aug", "Sep", "Oct">, <data.frame[150 x 5]>, <matrix[32 x 11]>]
\end{verbatim}

\hypertarget{select-columns}{%
\section{\texorpdfstring{\texttt{select()} Columns}{select() Columns}}\label{select-columns}}

\hypertarget{by-name}{%
\subsection{by Name}\label{by-name}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(a)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 1
##       a
##   <dbl>
## 1     1
## 2     4
## 3    NA
## 4     3
## 5     5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(a, c, e)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 3
##       a c     e     
##   <dbl> <lgl> <fct> 
## 1     1 TRUE  tiny  
## 2     4 FALSE small 
## 3    NA NA    medium
## 4     3 FALSE big   
## 5     5 TRUE  huge
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(b, d, f_col)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 3
##       b d     f_col     
##   <dbl> <chr> <date>    
## 1     9 A     NA        
## 2    NA B     2020-09-26
## 3     8 C     2020-09-25
## 4    10 <NA>  2020-09-24
## 5     7 E     2020-09-27
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(b, c, }\KeywordTok{everything}\NormalTok{())}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 10
##       b c     group     a d     e      f_col      g_col               col_h     col_i               
##   <dbl> <lgl> <chr> <dbl> <chr> <fct>  <date>     <dttm>              <list>    <list>              
## 1     9 TRUE  a         1 A     tiny   NA         2020-09-24 02:24:00 <dbl [2]> <NULL>              
## 2    NA FALSE a         4 B     small  2020-09-26 2020-09-25 04:48:00 <dbl [2]> <dbl [1]>           
## 3     8 NA    b        NA C     medium 2020-09-25 2020-09-26 07:12:00 <dbl [2]> <chr [5]>           
## 4    10 FALSE b         3 <NA>  big    2020-09-24 2020-09-27 09:36:00 <dbl [2]> <df[,5] [150 x 5]>  
## 5     7 TRUE  b         5 E     huge   2020-09-27 NA                  <dbl [2]> <dbl[,11] [32 x 11]>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(b, c, }\KeywordTok{everything}\NormalTok{(), }\OperatorTok{-}\NormalTok{a)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 9
##       b c     group d     e      f_col      g_col               col_h     col_i               
##   <dbl> <lgl> <chr> <chr> <fct>  <date>     <dttm>              <list>    <list>              
## 1     9 TRUE  a     A     tiny   NA         2020-09-24 02:24:00 <dbl [2]> <NULL>              
## 2    NA FALSE a     B     small  2020-09-26 2020-09-25 04:48:00 <dbl [2]> <dbl [1]>           
## 3     8 NA    b     C     medium 2020-09-25 2020-09-26 07:12:00 <dbl [2]> <chr [5]>           
## 4    10 FALSE b     <NA>  big    2020-09-24 2020-09-27 09:36:00 <dbl [2]> <df[,5] [150 x 5]>  
## 5     7 TRUE  b     E     huge   2020-09-27 NA                  <dbl [2]> <dbl[,11] [32 x 11]>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{cols_to_select <-}\StringTok{ }\KeywordTok{c}\NormalTok{(}\StringTok{"a"}\NormalTok{, }\StringTok{"c"}\NormalTok{, }\StringTok{"e"}\NormalTok{)}
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(}\KeywordTok{all_of}\NormalTok{(cols_to_select))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 3
##       a c     e     
##   <dbl> <lgl> <fct> 
## 1     1 TRUE  tiny  
## 2     4 FALSE small 
## 3    NA NA    medium
## 4     3 FALSE big   
## 5     5 TRUE  huge
\end{verbatim}

\hypertarget{by-index}{%
\subsection{by Index}\label{by-index}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(1L)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 1
##   group
##   <chr>
## 1 a    
## 2 a    
## 3 b    
## 4 b    
## 5 b
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{3}\NormalTok{, }\DecValTok{5}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 3
##   group     b d    
##   <chr> <dbl> <chr>
## 1 a         9 A    
## 2 a        NA B    
## 3 b         8 C    
## 4 b        10 <NA> 
## 5 b         7 E
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(}\DecValTok{2}\NormalTok{, }\DecValTok{4}\NormalTok{, }\DecValTok{6}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 3
##       a c     e     
##   <dbl> <lgl> <fct> 
## 1     1 TRUE  tiny  
## 2     4 FALSE small 
## 3    NA NA    medium
## 4     3 FALSE big   
## 5     5 TRUE  huge
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(}\DecValTok{2}\OperatorTok{:}\DecValTok{3}\NormalTok{, }\KeywordTok{everything}\NormalTok{())}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 10
##       a     b group c     d     e      f_col      g_col               col_h     col_i               
##   <dbl> <dbl> <chr> <lgl> <chr> <fct>  <date>     <dttm>              <list>    <list>              
## 1     1     9 a     TRUE  A     tiny   NA         2020-09-24 02:24:00 <dbl [2]> <NULL>              
## 2     4    NA a     FALSE B     small  2020-09-26 2020-09-25 04:48:00 <dbl [2]> <dbl [1]>           
## 3    NA     8 b     NA    C     medium 2020-09-25 2020-09-26 07:12:00 <dbl [2]> <chr [5]>           
## 4     3    10 b     FALSE <NA>  big    2020-09-24 2020-09-27 09:36:00 <dbl [2]> <df[,5] [150 x 5]>  
## 5     5     7 b     TRUE  E     huge   2020-09-27 NA                  <dbl [2]> <dbl[,11] [32 x 11]>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(}\DecValTok{2}\OperatorTok{:}\DecValTok{3}\NormalTok{, }\KeywordTok{everything}\NormalTok{(), }\DecValTok{-1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 9
##       a     b c     d     e      f_col      g_col               col_h     col_i               
##   <dbl> <dbl> <lgl> <chr> <fct>  <date>     <dttm>              <list>    <list>              
## 1     1     9 TRUE  A     tiny   NA         2020-09-24 02:24:00 <dbl [2]> <NULL>              
## 2     4    NA FALSE B     small  2020-09-26 2020-09-25 04:48:00 <dbl [2]> <dbl [1]>           
## 3    NA     8 NA    C     medium 2020-09-25 2020-09-26 07:12:00 <dbl [2]> <chr [5]>           
## 4     3    10 FALSE <NA>  big    2020-09-24 2020-09-27 09:36:00 <dbl [2]> <df[,5] [150 x 5]>  
## 5     5     7 TRUE  E     huge   2020-09-27 NA                  <dbl [2]> <dbl[,11] [32 x 11]>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{cols_to_select <-}\StringTok{ }\KeywordTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{3}\NormalTok{, }\DecValTok{5}\NormalTok{)}
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(}\KeywordTok{all_of}\NormalTok{(cols_to_select))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 3
##   group     b d    
##   <chr> <dbl> <chr>
## 1 a         9 A    
## 2 a        NA B    
## 3 b         8 C    
## 4 b        10 <NA> 
## 5 b         7 E
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{cols_to_select <-}\StringTok{ }\KeywordTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{3}\NormalTok{, }\DecValTok{5}\NormalTok{, }\DecValTok{1000}\NormalTok{)}
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(}\KeywordTok{any_of}\NormalTok{(cols_to_select))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 3
##   group     b d    
##   <chr> <dbl> <chr>
## 1 a         9 A    
## 2 a        NA B    
## 3 b         8 C    
## 4 b        10 <NA> 
## 5 b         7 E
\end{verbatim}

\hypertarget{by-name-pattern}{%
\subsection{by Name Pattern}\label{by-name-pattern}}

\texttt{contains()} selects a column if \emph{any} part of its name contains \texttt{match=}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(}\KeywordTok{contains}\NormalTok{(}\DataTypeTok{match =} \StringTok{"col"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 4
##   f_col      g_col               col_h     col_i               
##   <date>     <dttm>              <list>    <list>              
## 1 NA         2020-09-24 02:24:00 <dbl [2]> <NULL>              
## 2 2020-09-26 2020-09-25 04:48:00 <dbl [2]> <dbl [1]>           
## 3 2020-09-25 2020-09-26 07:12:00 <dbl [2]> <chr [5]>           
## 4 2020-09-24 2020-09-27 09:36:00 <dbl [2]> <df[,5] [150 x 5]>  
## 5 2020-09-27 NA                  <dbl [2]> <dbl[,11] [32 x 11]>
\end{verbatim}

\texttt{starts\_with()} selects a column if its name starts with \texttt{match=}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(}\KeywordTok{starts_with}\NormalTok{(}\StringTok{"col_"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 2
##   col_h     col_i               
##   <list>    <list>              
## 1 <dbl [2]> <NULL>              
## 2 <dbl [2]> <dbl [1]>           
## 3 <dbl [2]> <chr [5]>           
## 4 <dbl [2]> <df[,5] [150 x 5]>  
## 5 <dbl [2]> <dbl[,11] [32 x 11]>
\end{verbatim}

\texttt{starts\_with()} selects a column if its name ends with \texttt{match=}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(}\KeywordTok{ends_with}\NormalTok{(}\StringTok{"_col"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 2
##   f_col      g_col              
##   <date>     <dttm>             
## 1 NA         2020-09-24 02:24:00
## 2 2020-09-26 2020-09-25 04:48:00
## 3 2020-09-25 2020-09-26 07:12:00
## 4 2020-09-24 2020-09-27 09:36:00
## 5 2020-09-27 NA
\end{verbatim}

\texttt{matches()}s Selects a column if its name matches a regular expression pattern.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(}\KeywordTok{matches}\NormalTok{(}\StringTok{"(^}\CharTok{\textbackslash{}\textbackslash{}}\StringTok{w_)?col(_}\CharTok{\textbackslash{}\textbackslash{}}\StringTok{w)?"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 4
##   f_col      g_col               col_h     col_i               
##   <date>     <dttm>              <list>    <list>              
## 1 NA         2020-09-24 02:24:00 <dbl [2]> <NULL>              
## 2 2020-09-26 2020-09-25 04:48:00 <dbl [2]> <dbl [1]>           
## 3 2020-09-25 2020-09-26 07:12:00 <dbl [2]> <chr [5]>           
## 4 2020-09-24 2020-09-27 09:36:00 <dbl [2]> <df[,5] [150 x 5]>  
## 5 2020-09-27 NA                  <dbl [2]> <dbl[,11] [32 x 11]>
\end{verbatim}

\hypertarget{by-data-type}{%
\subsection{by Data Type}\label{by-data-type}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(}\KeywordTok{where}\NormalTok{(is.factor))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 1
##   e     
##   <fct> 
## 1 tiny  
## 2 small 
## 3 medium
## 4 big   
## 5 huge
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select_if}\NormalTok{(is.factor)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 1
##   e     
##   <fct> 
## 1 tiny  
## 2 small 
## 3 medium
## 4 big   
## 5 huge
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(}\KeywordTok{where}\NormalTok{(is.factor), f_col)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 2
##   e      f_col     
##   <fct>  <date>    
## 1 tiny   NA        
## 2 small  2020-09-26
## 3 medium 2020-09-25
## 4 big    2020-09-24
## 5 huge   2020-09-27
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(a, }\OperatorTok{!}\KeywordTok{where}\NormalTok{(is.integer))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 10
##       a group     b c     d     e      f_col      g_col               col_h     col_i               
##   <dbl> <chr> <dbl> <lgl> <chr> <fct>  <date>     <dttm>              <list>    <list>              
## 1     1 a         9 TRUE  A     tiny   NA         2020-09-24 02:24:00 <dbl [2]> <NULL>              
## 2     4 a        NA FALSE B     small  2020-09-26 2020-09-25 04:48:00 <dbl [2]> <dbl [1]>           
## 3    NA b         8 NA    C     medium 2020-09-25 2020-09-26 07:12:00 <dbl [2]> <chr [5]>           
## 4     3 b        10 FALSE <NA>  big    2020-09-24 2020-09-27 09:36:00 <dbl [2]> <df[,5] [150 x 5]>  
## 5     5 b         7 TRUE  E     huge   2020-09-27 NA                  <dbl [2]> <dbl[,11] [32 x 11]>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(}\KeywordTok{where}\NormalTok{(is.character) }\OperatorTok{|}\StringTok{ }\KeywordTok{where}\NormalTok{(is.factor))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 3
##   group d     e     
##   <chr> <chr> <fct> 
## 1 a     A     tiny  
## 2 a     B     small 
## 3 b     C     medium
## 4 b     <NA>  big   
## 5 b     E     huge
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(}\KeywordTok{where}\NormalTok{(}\OperatorTok{~}\StringTok{ }\KeywordTok{is.double}\NormalTok{(.) }\OperatorTok{|}\StringTok{ }\KeywordTok{is.list}\NormalTok{(.)))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 6
##       a     b f_col      g_col               col_h     col_i               
##   <dbl> <dbl> <date>     <dttm>              <list>    <list>              
## 1     1     9 NA         2020-09-24 02:24:00 <dbl [2]> <NULL>              
## 2     4    NA 2020-09-26 2020-09-25 04:48:00 <dbl [2]> <dbl [1]>           
## 3    NA     8 2020-09-25 2020-09-26 07:12:00 <dbl [2]> <chr [5]>           
## 4     3    10 2020-09-24 2020-09-27 09:36:00 <dbl [2]> <df[,5] [150 x 5]>  
## 5     5     7 2020-09-27 NA                  <dbl [2]> <dbl[,11] [32 x 11]>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select_if}\NormalTok{(}\OperatorTok{~}\StringTok{ }\KeywordTok{is.character}\NormalTok{(.x) }\OperatorTok{|}\StringTok{ }\KeywordTok{is.factor}\NormalTok{(.x))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 3
##   group d     e     
##   <chr> <chr> <fct> 
## 1 a     A     tiny  
## 2 a     B     small 
## 3 b     C     medium
## 4 b     <NA>  big   
## 5 b     E     huge
\end{verbatim}

\hypertarget{filter-rows}{%
\section{\texorpdfstring{\texttt{filter()} Rows}{filter() Rows}}\label{filter-rows}}

\hypertarget{by-row_number}{%
\subsection{\texorpdfstring{by \texttt{row\_number()}}{by row\_number()}}\label{by-row_number}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{filter}\NormalTok{(}\KeywordTok{row_number}\NormalTok{() }\OperatorTok{==}\StringTok{ }\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 1 x 10
##   group     a     b c     d     e     f_col      g_col               col_h     col_i 
##   <chr> <dbl> <dbl> <lgl> <chr> <fct> <date>     <dttm>              <list>    <list>
## 1 a         1     9 TRUE  A     tiny  NA         2020-09-24 02:24:00 <dbl [2]> <NULL>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{filter}\NormalTok{(}\KeywordTok{row_number}\NormalTok{() }\OperatorTok{>}\StringTok{ }\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 4 x 10
##   group     a     b c     d     e      f_col      g_col               col_h     col_i               
##   <chr> <dbl> <dbl> <lgl> <chr> <fct>  <date>     <dttm>              <list>    <list>              
## 1 a         4    NA FALSE B     small  2020-09-26 2020-09-25 04:48:00 <dbl [2]> <dbl [1]>           
## 2 b        NA     8 NA    C     medium 2020-09-25 2020-09-26 07:12:00 <dbl [2]> <chr [5]>           
## 3 b         3    10 FALSE <NA>  big    2020-09-24 2020-09-27 09:36:00 <dbl [2]> <df[,5] [150 x 5]>  
## 4 b         5     7 TRUE  E     huge   2020-09-27 NA                  <dbl [2]> <dbl[,11] [32 x 11]>
\end{verbatim}

\hypertarget{by-name-1}{%
\subsection{by Name}\label{by-name-1}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{filter}\NormalTok{(a }\OperatorTok{==}\StringTok{ }\DecValTok{2}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 0 x 10
## # ... with 10 variables: group <chr>, a <dbl>, b <dbl>, c <lgl>, d <chr>, e <fct>, f_col <date>, g_col <dttm>, col_h <list>, col_i <list>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{filter}\NormalTok{(a }\OperatorTok{!=}\StringTok{ }\DecValTok{2}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 4 x 10
##   group     a     b c     d     e     f_col      g_col               col_h     col_i               
##   <chr> <dbl> <dbl> <lgl> <chr> <fct> <date>     <dttm>              <list>    <list>              
## 1 a         1     9 TRUE  A     tiny  NA         2020-09-24 02:24:00 <dbl [2]> <NULL>              
## 2 a         4    NA FALSE B     small 2020-09-26 2020-09-25 04:48:00 <dbl [2]> <dbl [1]>           
## 3 b         3    10 FALSE <NA>  big   2020-09-24 2020-09-27 09:36:00 <dbl [2]> <df[,5] [150 x 5]>  
## 4 b         5     7 TRUE  E     huge  2020-09-27 NA                  <dbl [2]> <dbl[,11] [32 x 11]>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{filter}\NormalTok{(c)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 2 x 10
##   group     a     b c     d     e     f_col      g_col               col_h     col_i               
##   <chr> <dbl> <dbl> <lgl> <chr> <fct> <date>     <dttm>              <list>    <list>              
## 1 a         1     9 TRUE  A     tiny  NA         2020-09-24 02:24:00 <dbl [2]> <NULL>              
## 2 b         5     7 TRUE  E     huge  2020-09-27 NA                  <dbl [2]> <dbl[,11] [32 x 11]>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{filter}\NormalTok{(}\OperatorTok{!}\NormalTok{c)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 2 x 10
##   group     a     b c     d     e     f_col      g_col               col_h     col_i             
##   <chr> <dbl> <dbl> <lgl> <chr> <fct> <date>     <dttm>              <list>    <list>            
## 1 a         4    NA FALSE B     small 2020-09-26 2020-09-25 04:48:00 <dbl [2]> <dbl [1]>         
## 2 b         3    10 FALSE <NA>  big   2020-09-24 2020-09-27 09:36:00 <dbl [2]> <df[,5] [150 x 5]>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{filter}\NormalTok{(a }\OperatorTok{==}\StringTok{ }\DecValTok{5}\NormalTok{, d }\OperatorTok{==}\StringTok{ "E"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 1 x 10
##   group     a     b c     d     e     f_col      g_col               col_h     col_i               
##   <chr> <dbl> <dbl> <lgl> <chr> <fct> <date>     <dttm>              <list>    <list>              
## 1 b         5     7 TRUE  E     huge  2020-09-27 NA                  <dbl [2]> <dbl[,11] [32 x 11]>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{filter}\NormalTok{(a }\OperatorTok{>=}\StringTok{ }\DecValTok{3} \OperatorTok{|}\StringTok{ }\NormalTok{f_col }\OperatorTok{==}\StringTok{ "2020-09-24"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 3 x 10
##   group     a     b c     d     e     f_col      g_col               col_h     col_i               
##   <chr> <dbl> <dbl> <lgl> <chr> <fct> <date>     <dttm>              <list>    <list>              
## 1 a         4    NA FALSE B     small 2020-09-26 2020-09-25 04:48:00 <dbl [2]> <dbl [1]>           
## 2 b         3    10 FALSE <NA>  big   2020-09-24 2020-09-27 09:36:00 <dbl [2]> <df[,5] [150 x 5]>  
## 3 b         5     7 TRUE  E     huge  2020-09-27 NA                  <dbl [2]> <dbl[,11] [32 x 11]>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{filter}\NormalTok{(a }\OperatorTok{<}\StringTok{ }\DecValTok{2} \OperatorTok{|}\StringTok{ }\NormalTok{c)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 2 x 10
##   group     a     b c     d     e     f_col      g_col               col_h     col_i               
##   <chr> <dbl> <dbl> <lgl> <chr> <fct> <date>     <dttm>              <list>    <list>              
## 1 a         1     9 TRUE  A     tiny  NA         2020-09-24 02:24:00 <dbl [2]> <NULL>              
## 2 b         5     7 TRUE  E     huge  2020-09-27 NA                  <dbl [2]> <dbl[,11] [32 x 11]>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{filter}\NormalTok{(}\OperatorTok{!}\KeywordTok{is.na}\NormalTok{(a), }\OperatorTok{!}\KeywordTok{is.na}\NormalTok{(b), }\OperatorTok{!}\KeywordTok{is.na}\NormalTok{(d))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 2 x 10
##   group     a     b c     d     e     f_col      g_col               col_h     col_i               
##   <chr> <dbl> <dbl> <lgl> <chr> <fct> <date>     <dttm>              <list>    <list>              
## 1 a         1     9 TRUE  A     tiny  NA         2020-09-24 02:24:00 <dbl [2]> <NULL>              
## 2 b         5     7 TRUE  E     huge  2020-09-27 NA                  <dbl [2]> <dbl[,11] [32 x 11]>
\end{verbatim}

\hypertarget{by-type}{%
\subsection{by Type}\label{by-type}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{filter}\NormalTok{(}\KeywordTok{across}\NormalTok{(}\KeywordTok{where}\NormalTok{(is.numeric), }\OperatorTok{~}\StringTok{ }\NormalTok{.x }\OperatorTok{>=}\StringTok{ }\DecValTok{5}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 1 x 10
##   group     a     b c     d     e     f_col      g_col               col_h     col_i               
##   <chr> <dbl> <dbl> <lgl> <chr> <fct> <date>     <dttm>              <list>    <list>              
## 1 b         5     7 TRUE  E     huge  2020-09-27 NA                  <dbl [2]> <dbl[,11] [32 x 11]>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{filter_if}\NormalTok{(is.numeric, }\OperatorTok{~}\StringTok{ }\NormalTok{.x }\OperatorTok{>=}\StringTok{ }\DecValTok{5}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 1 x 10
##   group     a     b c     d     e     f_col      g_col               col_h     col_i               
##   <chr> <dbl> <dbl> <lgl> <chr> <fct> <date>     <dttm>              <list>    <list>              
## 1 b         5     7 TRUE  E     huge  2020-09-27 NA                  <dbl [2]> <dbl[,11] [32 x 11]>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{filter_if}\NormalTok{(is.list, }\OperatorTok{~}\StringTok{ }\KeywordTok{map_lgl}\NormalTok{(.x, }\OperatorTok{~}\StringTok{ }\OperatorTok{!}\KeywordTok{is.null}\NormalTok{(.x)))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 4 x 10
##   group     a     b c     d     e      f_col      g_col               col_h     col_i               
##   <chr> <dbl> <dbl> <lgl> <chr> <fct>  <date>     <dttm>              <list>    <list>              
## 1 a         4    NA FALSE B     small  2020-09-26 2020-09-25 04:48:00 <dbl [2]> <dbl [1]>           
## 2 b        NA     8 NA    C     medium 2020-09-25 2020-09-26 07:12:00 <dbl [2]> <chr [5]>           
## 3 b         3    10 FALSE <NA>  big    2020-09-24 2020-09-27 09:36:00 <dbl [2]> <df[,5] [150 x 5]>  
## 4 b         5     7 TRUE  E     huge   2020-09-27 NA                  <dbl [2]> <dbl[,11] [32 x 11]>
\end{verbatim}

\hypertarget{arrange-rows}{%
\section{\texorpdfstring{\texttt{arrange()} Rows}{arrange() Rows}}\label{arrange-rows}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{arrange}\NormalTok{(a)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 10
##   group     a     b c     d     e      f_col      g_col               col_h     col_i               
##   <chr> <dbl> <dbl> <lgl> <chr> <fct>  <date>     <dttm>              <list>    <list>              
## 1 a         1     9 TRUE  A     tiny   NA         2020-09-24 02:24:00 <dbl [2]> <NULL>              
## 2 b         3    10 FALSE <NA>  big    2020-09-24 2020-09-27 09:36:00 <dbl [2]> <df[,5] [150 x 5]>  
## 3 a         4    NA FALSE B     small  2020-09-26 2020-09-25 04:48:00 <dbl [2]> <dbl [1]>           
## 4 b         5     7 TRUE  E     huge   2020-09-27 NA                  <dbl [2]> <dbl[,11] [32 x 11]>
## 5 b        NA     8 NA    C     medium 2020-09-25 2020-09-26 07:12:00 <dbl [2]> <chr [5]>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{arrange}\NormalTok{(}\KeywordTok{desc}\NormalTok{(a))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 5 x 10
##   group     a     b c     d     e      f_col      g_col               col_h     col_i               
##   <chr> <dbl> <dbl> <lgl> <chr> <fct>  <date>     <dttm>              <list>    <list>              
## 1 b         5     7 TRUE  E     huge   2020-09-27 NA                  <dbl [2]> <dbl[,11] [32 x 11]>
## 2 a         4    NA FALSE B     small  2020-09-26 2020-09-25 04:48:00 <dbl [2]> <dbl [1]>           
## 3 b         3    10 FALSE <NA>  big    2020-09-24 2020-09-27 09:36:00 <dbl [2]> <df[,5] [150 x 5]>  
## 4 a         1     9 TRUE  A     tiny   NA         2020-09-24 02:24:00 <dbl [2]> <NULL>              
## 5 b        NA     8 NA    C     medium 2020-09-25 2020-09-26 07:12:00 <dbl [2]> <chr [5]>
\end{verbatim}

  \bibliography{book.bib,packages.bib}

\end{document}
